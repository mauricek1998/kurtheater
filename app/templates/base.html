<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kino Dienstplan</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <style>
    :root {
      --ci-gray: #4A4A4A;
      --ci-orange: #FF6B00;
    }
    .dropdown-menu {
      display: none;
      transition: all 0.3s ease;
    }
    .dropdown:hover .dropdown-menu {
      display: block;
    }
    .dropdown-menu:hover {
      display: block;
    }
    .btn-primary {
      background-color: var(--ci-orange);
      color: white;
    }
    .btn-primary:hover {
      background-color: #E65000;
    }
  </style>
</head>
<body class="min-h-screen bg-gray-50 flex flex-col">
  <header class="bg-gradient-to-r from-gray-700 to-gray-800 text-white shadow-lg">
    <div class="container mx-auto px-4 py-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <h1 class="text-2xl font-bold mb-4 md:mb-0">
          <a href="{{ url_for('main.index') }}" class="hover:text-orange-300 transition-colors">
            Kurtheater Dienstplaner
          </a>
        </h1>
        {% if current_user.is_authenticated %}
        <nav class="flex items-center space-x-6">
          {% if current_user.is_supervisor %}
          <a href="{{ url_for('main.index') }}" 
             class="hover:text-orange-300 transition-colors">Startseite</a>
          <a href="{{ url_for('main.supervisor') }}" 
             class="hover:text-orange-300 transition-colors">Dienstpläne verwalten</a>
          <a href="{{ url_for('main.user_management') }}" 
             class="hover:text-orange-300 transition-colors">Benutzer verwalten</a>
          {% else %}
          <a href="{{ url_for('main.employee_drafts') }}" 
             class="hover:text-orange-300 transition-colors">Verfügbarkeit eintragen</a>
          <a href="{{ url_for('main.plan_list') }}" 
             class="hover:text-orange-300 transition-colors">Dienstpläne ansehen</a>
          {% endif %}
          <div class="dropdown relative">
            <button class="flex items-center space-x-1 hover:text-orange-300 transition-colors p-2">
              <span>{{ current_user.name }}</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="dropdown-menu absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1">
              <div class="px-4 py-2 text-sm text-gray-700">
                Rollen: {{ ', '.join(current_user.roles) }}
              </div>
              <a href="{{ url_for('main.logout') }}" 
                 class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Abmelden</a>
            </div>
          </div>
        </nav>
        {% endif %}
      </div>
    </div>
  </header>
  <main class="flex-grow container mx-auto px-4 py-8">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="max-w-4xl mx-auto mb-8">
          {% for category, message in messages %}
            <div class="p-4 rounded-lg mb-4 animate-fade-in
              {% if category == 'success' %}bg-green-100 text-green-700 border border-green-400
              {% elif category == 'error' %}bg-red-100 text-red-700 border border-red-400
              {% elif category == 'info' %}bg-blue-100 text-blue-700 border border-blue-400
              {% endif %}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>
  <footer class="bg-gray-800 text-white mt-auto">
    <div class="container mx-auto px-4 py-6">
      <div class="text-center">
        <p class="text-gray-400">&copy; 2025 Kurtheater Hennef e.V.</p>
      </div>
    </div>
  </footer>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  {% block scripts %}{% endblock %}
</body>
</html>
